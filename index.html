<!DOCTYPE html>
<html>
<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<title>@JCHANNEL.NET</title>

	<link href="css/style.css" rel="stylesheet" />

</head>
<body>
	
	<div class="lines"></div>
	<div class="noise"></div>
	<div class="vhs" data-splitting>ASTHER</div>
	<div class="time"><span id="time"></span></div>
	<div class="counter">REC <label id="minutes">00</label>:<label id="seconds">00</label></div>
      		<hgroup>
			<h4>project</h4>
			<h1>Divergence; <span class="Capital">M</span>eter</h1>
		</hgroup>
		<div id="c">
			<canvas id="myCanvas" width="400" height="135">
				firefox和chrome是看不到这句话的哦～
			</canvas>
		</div>

		<div>
			<button type="button" id="cwl">
				send D-Mail!
			</button>
		</div>
      <a href="https://steamcommunity.com/id/uploadspeed/" target="_blank">steam</a> - <a href="https://twitter.com/litecoinluxury" target="_blank">twitter</a> - <a href="https://lainfiles.cloud" target="_blank">lainfiles</a>


  <script src='https://unpkg.com/splitting/dist/splitting.min.js'></script>

    <script  src="js/vhs.js"></script>
    
    <script type='text/javascript'>
var isCtrl = false;
document.onkeyup=function(e)
{
    if(e.which == 17)
    isCtrl=false;
}
document.onkeydown=function(e)
{
    if(e.which == 17)
    isCtrl=true;
    if((e.which == 85) || (e.which == 67) && (isCtrl == true))
    {
        return false;
    }
}
var isNS = (navigator.appName == "Netscape") ? 1 : 0;
if(navigator.appName == "Netscape") document.captureEvents(Event.MOUSEDOWN||Event.MOUSEUP);
function mischandler(){
    return false;
}
function mousehandler(e){
    var myevent = (isNS) ? e : event;
    var eventbutton = (isNS) ? myevent.which : myevent.button;
    if((eventbutton==2)||(eventbutton==3)) return false;
}
document.oncontextmenu = mischandler;
document.onmousedown = mousehandler;
document.onmouseup = mousehandler;
</script>
	
			<script type="text/javascript">
            const TWIDTH = 400;
            var h = 135;
            var w = 400;
            var shiftH = 0;
            var shiftW = 0;
            var c = document.getElementById("myCanvas");
            var cxt = c.getContext("2d");
            var img = new Image();
            $(img).attr("src", "numbers.png");
            var arr = new Array();
            arr = createArr();

            function drawBase() {//orphaned
                var baseC = document.createElement("canvas");
                baseC.width = TWIDTH;
                baseC.heigh = 70;
                baseCxt = baseC.getContext("2d");
                baseCxt.fillStyle = "#585858";
                baseCxt.fillRect(0, 0, TWIDTH, 70);
                cxt.drawImage(baseC, 0, 135);
            }

            //drawBase();

            function drawTubes(arr, isHighlighted) {
                var nCanvas = document.createElement("canvas");
                nCanvas.width = TWIDTH;
                nCanvas.heigh = 135;
                nCxt = nCanvas.getContext("2d");
                var line;
                if (isHighlighted == true) {
                    line = 1
                } else {
                    line = 0
                };
                for (var i = 0; i < arr.length; i++) {
                    nCxt.drawImage(img, 45 * arr[i], 135 * line, 45, 135, TWIDTH / 8 * i, 0, 45, 135);
                };
                return nCanvas;
            }

            function createArr() {
                var numList = [];
                for ( i = 0; i < 8; i++) {
                    m = Math.floor(Math.random() * 10);
                    //t = setTimeout(loop, 100);
                    numList.push(m);

                }
                numList[1] = 10;
                return numList;
            }

            function blink(greyCVS, shinyCVS) {
                var gc = greyCVS;
                var sc = shinyCVS;
                var scxt = sc.getContext("2d");
                var factor = 0;
                const TIME = 0.02;

                function createImage() {
                    var sc2 = document.createElement("canvas");
                    sc2.width = TWIDTH;
                    sc2.height = 135;
                    scxt2 = sc2.getContext("2d");
                    factor += TIME;
                    cxt.clearRect(0, 0, sc2.width, sc2.height);
                    cxt.drawImage(gc, shiftW, shiftH);
                    scxt2.globalAlpha = factor;
                    scxt2.drawImage(sc, 0, 0);
                    cxt.drawImage(sc2, shiftW, shiftH);
                    if (factor >= 2) {
                        clearInterval(intUp);
                        intDown = setInterval(createImage2, TIME);
                    }
                }

                function createImage2() {
                    var sc2 = document.createElement("canvas");
                    sc2.width = TWIDTH;
                    sc2.height = 135;
                    scxt2 = sc2.getContext("2d");
                    factor -= TIME;
                    cxt.clearRect(0, 0, sc2.width, sc2.height);
                    cxt.drawImage(gc, shiftW, shiftH);
                    scxt2.globalAlpha = factor;
                    scxt2.drawImage(sc, 0, 0);
                    cxt.drawImage(sc2, shiftW, shiftH);
                    if (factor <= 0) {
                        clearInterval(intDown);
                        cxt.clearRect(0, 0, sc2.width, sc2.height);
                        cxt.drawImage(gc, shiftW, shiftH);
                    }
                }

                intUp = setInterval(createImage, TIME);
            }

            function loop() {
                arr = createArr();
                cxt.drawImage(drawTubes(arr, false), shiftW, shiftH);
            }

            function stopLoop() {
                clearInterval(loop0);
                blink(drawTubes(arr, false), drawTubes(arr, true));
            }

            function changeWorldLine() {
                try {
                    clearInterval(loop0);
                    clearTimeout(blink0);
                } catch(err) {
                }
                loop0 = setInterval(loop, 50);
                blink0 = setTimeout(stopLoop, 3000);
            }


            $(img).load(function() {
                changeWorldLine();
            });
            $("#cwl").click(function() {
                changeWorldLine();
            });

		</script>
	
</body>
</html>
